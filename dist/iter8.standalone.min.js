!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.iter=n()}}(function(){return function n(r,t,e){function i(o,a){if(!t[o]){if(!r[o]){var f="function"==typeof require&&require;if(!a&&f)return f(o,!0);if(u)return u(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var s=t[o]={exports:{}};r[o][0].call(s.exports,function(n){var t=r[o][1][n];return i(t?t:n)},s,s.exports,n,r,t,e)}return t[o].exports}for(var u="function"==typeof require&&require,o=0;o<e.length;o++)i(e[o]);return i}({1:[function(n,r,t){"use strict";function e(n,r,t,i){if(n===q)return t?(this[q]=r.apply(t,i),this[S]=r,this[B]=t,this[P]=i):this[q]=r,void(this[T]=[]);if(!(this instanceof e))return new e(n,r);var u=j(n);if(!u&&null!=n)throw new Error('iter can only be constructed with an iterable, iterator or generator. Use "fromObject" of your intent is to enumerate object properties.');this[q]=u||[][q],this[T]=[]}function i(n){if(n=n||this,A(n[q])!==N)throw new Error("The entity was not a valid iterable. It must implement [Symbol.iterator]");var r=n[q]();if(this&&this[T].push(r),A(r.next)!==N)throw new Error("The iterable did not return a valid iterator.");return r}function u(n){return this&&(n?o(this[T]):this[T]=[]),{done:!0}}function o(n){for(;n.length;){var r=n.pop();r&&A(r.return)===N&&r.return()}}function a(n){return function(){var r=this,t=H(arguments);return new e(q,function(){return n.apply(r,t)[q]()})}}function f(n,r){return(r?s:c)(function(){var r=this,t=H(arguments);return function(){return r[M](n.apply(r,[r[D].bind(r),r[I].bind(r)].concat(t)))}})}function c(n,r){return function(){return new e(q,n.apply(this,(r||[]).concat(H(arguments))))}}function s(n){return function(){return new e(q,n,this,H(arguments))}}function l(n,r){var t=function(e){t=m(n);var i=t(e);return r(i),i};return function(n){return t(n)}}function v(n,r,t,e){var u="while (_c=_i.next(),!_c.done)",a="_c.value",f=(e?"if (a) "+u+" {"+r.replace(/\{v\}/g,"a("+a+")")+";} else ":"")+u+"{"+r.replace(/\{v\}/g,a)+";};",c=new Function("a","b","c","g","z","var _i=g(this),_c;"+n+";"+f+(t||"return r"));return function(n,r,t){return c.call(this,n,r,t,i,o)}}function h(n,r,t){var e=v(n,r,t,!0);return function(n){var r=n&&m(n);return e.apply(this,[r].concat(G.concat.call(arguments)))}}function d(n,r,t,e){return function(){var i=H(arguments,0,e);if(t&&i.length<t)throw new TypeError(t+" arguments are required.");for(var u=0;u<Math.min(i.length,r.length);u++){var o=Array.isArray(r[u])?r[u]:[r[u]];if(!(p(i[u])&&o.indexOf(R)>=0)){var a=A(i[u]);if(o.indexOf(a)<0)throw new TypeError("Argument "+u+" must be of type: ["+o.join(",")+"], was "+a)}}return n.apply(this,i)}}function p(n){return n&&n[q]&&A(n)!==E||n&&n.next&&A(n.next)===N}function y(n,r){var t=new e(q,x(n,r));return t[z]=r,t[B]=n,t}function w(n,r){if(!this[z])throw new Error("thenBy only makes sense after orderBy");var t=this[z].slice();return t.push({fn:n,desc:r}),y(this[B],t)}function x(n,r){return r.forEach(function(n){n.fn=m(n.fn)}),function(){var t=n.toArray().sort(function(n,t){for(var e=0,i=0,i=0;0===e&&i<r.length;i++){var u=r[i].fn(n),o=r[i].fn(t);e=(u<o?-1:u>o?1:0)*(r[i].desc?-1:1)}return e});return t[q]()}}function b(n,r,t,i){return function(){var u=e.reflect(t,n,function(n){return"constructor"!==n&&(!i||i(n))});return r||(u=u.filter(function(n){return n[1].field})),u=u.map(function(n){return[n[0],t[n[0]]]}),u[q]()}}function g(n,r){return null!=n?new e(r).map(m(n)):r}function m(n){return null==n?function(n){return n}:A(n)===N?n:function(r){return r[n]}}function O(n,r,t){t=t||0;var i=new e(Object.getOwnPropertyNames(n)).map(function(r){return[r,n,t]}).execute();if(r){var u=Object.getPrototypeOf(n);u!==Object.prototype&&(i=i.union(O(u,!0,t+1)).on("0"))}return i}function j(n){return n&&(A(n.next)===N?_(n):typeof n===N?n:n[q]?n[q].bind(n):void 0)}function _(n){var r=[],t={};return function(){var e=0;return{next:function(){if(!t.done&&e===r.length){if(t=n.next(),t.done)return u();r[e]=t.value}return e<r.length?{value:r[e++],done:!1}:u()}}}}function k(n){if(!n||!n.hasOwnProperty(0)&&n.hasOwnProperty(1)&&2===n.length)throw new Error("The object was not a key-value pair, e.g. a 2-element array")}function A(n){return null===n?"null":typeof n}var E=Symbol,q=E.iterator,z=E(),B=E(),P=E(),S=E(),T=E(),D=E(),I=E(),M=E(),F="prototype",N="function",U="number",E="string",W="boolean",R="iterable",C=[N,"object"],J=[N,"string"],L=J.concat("undefined","null"),G=Array[F],H=Function.call.bind(G.slice);Object.assign(e,{fromObject:d(c(b,[!0,!1]),[C,N],1),fromObjectOwn:d(c(b,[!1,!1]),[C,N],1),reflect:d(function(n,r,t){A(r)===N&&(t=r,r=!1);var e=O(n,r);return t&&(e=e.filter(function(n,r){return t(n[0],r)})),e.map(function(n){var r=Object.getOwnPropertyDescriptor(n[1],n[0]),t=r.hasOwnProperty("value");return[n[0],{type:t?A(r.value):null,field:t,writable:!!r.writable||!!r.set,get:r.get,set:r.set,configurable:r.configurable,enumerable:r.enumerable,depth:n[2]}]})},[C,W,N],1),generate:function(n,r){var t=A(n)===N?n:function(){return n};return new e(q,function(){var n=-1;return r=r||1,{next:function(){return++n>=r?u():{done:!1,value:t(n)}}}})}}),e[F]={constructor:e,forEach:d(v("var i=0","a.call(b,{v},i++)",";"),[N],1),do:d(f(function(n,r,t,e){var i=0,u=n();return function(){var n=u.next();return!n.done&&t.call(e,n.value,i++),n.done?r():n}}),[N],1),groupBy:d(c(function(n,r){var t=this;return function(){for(var e,u=m(n),o=m(r),a=new Map,f=i(t);e=f.next(),!e.done;){var c=u(e.value);(a.get(c)||a.set(c,[]).get(c)).push(o(e.value))}return i(a)}}),[J,N]),orderBy:d(function(n){return y(this,[{fn:n}])},[J]),orderByDesc:d(function(n){return y(this,[{fn:n,desc:!0}])},[J]),thenBy:d(w,[J],1),thenByDesc:function(n){return w.call(this,n,!0)},count:v("var r=0","r++"),skip:d(function(n){return this.skipWhile(function(){return 0!==n--})},[U]),skipWhile:d(f(function(n,r,t){var e,i=n();return function(){if(e)return i.next();for(;e=i.next(),!e.done&&t(e.value););return e.done?r():e}}),[N]),take:d(f(function(n,r,t){var e=n(),i={};return function(){return i.done||t--<=0||(i=e.next()),i.done||t<0?r(t<0):i}}),[U],1),takeWhile:d(f(function(n,r,t){var e=n(),i={};return function(){return i=!i.done&&e.next(),!i.done&&t(i.value)?i:r(!i.done)}}),[N]),cast:d(function(n){return this.map(function(r){return new n(r)})},[N],1),first:v("var r=a","z([_i]); return {v}","return r"),last:v("var r=a,l","r={v}"),flatten:d(f(function(n,r,t){var e=[],i=n(),u=this[T];return function(){for(;i||e.length>0;){i||(i=e.pop(),u.indexOf(i)>0&&u.push(i));var n=i.next();if(n.value&&p(n.value)&&(t||0===e.length))e.push(i),i=n.value[q](),u.push(i);else{if(!n.done)return n;i=void 0,u.pop()}}return r()}}),[W]),unique:d(f(function(n,r,t){var e,i=new Set,u=n(),o=m(t);return function(){for(;e=u.next(),!e.done;){var n=o(e.value);if(!i.has(n))return i.add(n),e}return r()}}),[J]),except:d(f(function(n,r,t,e,i){var u,o=m(e),a=new Set(g(i,t)),f=n();return function(){for(;u=f.next(),!u.done&&a.has(o(u.value)););return u.done?r():u}},!0),[R,J,J],1),intersect:d(f(function(n,r,t,e,i){var u,o=m(e),a=new Set(g(i,t)),f=n();return function(){for(;u=f.next(),!u.done&&!a.has(o(u.value)););return u.done?r():u}},!0),[R,J,J],1,1),union:d(s(function(n,r,t){var i=new e(n).except(this);return(r||t)&&(i=i.on(r,t)),this.concat(i)[q]},1),[R],1,1),leftJoin:d(f(function(n,r,t,u,o,a){var f,c,s,l=this,v=!o&&!a,h=m(v?0:o),d=m(v?1:null),y=m(v?0:a),w=m(v?1:null),x=n(this),b=new Map(a?new e(t).groupBy(y):t);return function(){for(;;){if(!f){var n=x.next();if(n.done)return r();s=h(n.value),c=d(n.value);var t=b.get(s);if(!t||!p(t))return l[T]=[x],{done:!1,value:u(c,t,s)};f=i(t)}var e=f.next();if(!e.done)return l[T]=[x,f],{done:!1,value:u(c,w(e.value),s)};f=null}}},!0),[R],1),on:d(function(n,r){var t=1===arguments.length?n:r;if(!this[B])throw new Error('"on" make no sense without a prior join or set merge operation.');return new e(q,this[S].apply(this[B],this[P].concat([n,t])))},[L,L],1),sequenceEqual:d(function(n,r,t){for(var e,u,a=i(this),f=i(n),c=m(r),s=m(t);u=f.next(),!u.done;)if(e=a.next(),e.done||s(u.value)!==c(e.value))return o([!e.done&&a,f]),!1;return!!a.next().done||(o([a])||!1)},[R,L,L],1),keys:function(){return this.map(l(0,k))},values:function(){return this.map(l(1,k))},concat:function(){return new e([this].concat(H(arguments))).flatten()},map:d(f(function(n,r,t,e){var i=m(t),u=0,o=n();return function(){var n=o.next();return n.done?r():{done:!1,value:i.call(e,n.value,u++)}}}),[J],1),filter:d(f(function(n,r,t,e){var i=0,u=n();return function(){for(var n=u.next();!n.done&&!t.call(e,n.value,i++);)n=u.next();return n.done?r():n}}),[N],1),some:d(v("var i=0","if (a({v},b,i++)) { z([_i]); return true }","return false"),[N],1),every:d(v("var i=0","if (!a({v},b,i++)) {  z([_i]); return false }","return true"),[N],1),includes:v("var i=0","if ({v}===a) { z([_i]); return true } i++","return false"),indexOf:v("var i=0","if ({v}===a) { z([_i]); return i } i++","return -1"),lastIndexOf:v("var r=-1,i=0","if ({v}===a) r=i; i++"),findIndex:d(v("var i=0","if (a.call(b,{v},i)===true) { z([_i]); return i } i++","return -1"),[N],1),find:v("var i=0","if (a.call(b,{v},i++)===true) { z([_i]); return {v} }","return undefined"),get:d(function(n){return this.skip(n).first()},[U],1),slice:d(function(n,r){return this.skip(n).take(r-n)},[U,U],1),reduce:d(v("var r=b,i=0","r=a(r,{v},i++)"),[N],1),reduceRight:d(function(n,r){return this.toArray().reduceRight(n,r)},[N],1),join:function(n){return this.toArray().join(n)},sort:d(a(function(n){return this.toArray().sort(n)}),[N]),reverse:a(function(){return this.toArray().reverse()}),toObject:v("var r={}","r[{v}[0]]={v}[1]"),toArray:v("var r=[]","r.push({v})"),as:d(function(n){switch(n){case Array:return this.toArray();case Object:return this.toObject();default:return new n(this)}},[N],1),execute:function(){return new e(this.toArray())},min:d(h("var r=Infinity","if (r>{v}) r={v}"),[J]),max:d(h("var r=-Infinity","if (r<{v}) r={v}"),[J]),sum:d(h("var r=0","r+={v}"),[J]),mean:d(h("var r=0,i=0","r+={v};i++","return r/i"),[J]),toString:function(){return"["+this.take(20).join(",")+(this.count()>20?", ...":"")+"]"}},e[F][D]=i,e[F][I]=u,e[F][M]=function(n){var r=this;return{next:n,return:function(){r[I](!0)}}},r.exports=e},{}]},{},[1])(1)});
